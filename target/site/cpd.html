<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Nov 13, 2019 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=${outputEncoding}" />
    <title>CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20191113" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2019-11-13</span>
                  &nbsp;| <span id="projectVersion">Version: ${project.version}</span>
                      </div>
            <div class="xright">        
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.0.5.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXPort.java</td><td>76</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXPort.java</td><td>76</td></tr><tr class="b"><td colspan='2'><div><pre>                    &quot;Start virtual port {} on virtual switch {} in virtual network {}&quot;,
                    port, dpid, virtualNetwork.getTenantId());
            OVXPort ovxPort = virtualNetwork.getSwitch(dpid.longValue())
                    .getPort(port.shortValue());
            Map&lt;String, Object&gt; reply = new HashMap&lt;String, Object&gt;(
                    ovxPort.getDBObject());
            reply.put(TenantHandler.VDPID, ovxPort.getParentSwitch()
                    .getSwitchId());
            reply.put(TenantHandler.TENANT, ovxPort.getTenantId());
            resp = new JSONRPC2Response(reply, 0);

        } catch (final MissingRequiredField e) {
            resp = new JSONRPC2Response(
                    new JSONRPC2Error(
                            JSONRPC2Error.INVALID_PARAMS.getCode(),
                            this.cmdName()
                                    + &quot;: Unable to delete this virtual port in the virtual network : &quot;
                                    + e.getMessage()), 0);
        } catch (final InvalidPortException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid port : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final InvalidDPIDException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid virtual dpid : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        }
        return resp;
    }


    @Override
    public JSONRPC2ParamsType getType() {
        return JSONRPC2ParamsType.OBJECT;
    }

}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/db/DBManager.java</td><td>455</td></tr><tr class="a"><td>net/onrc/openvirtex/db/DBManager.java</td><td>541</td></tr><tr class="b"><td colspan='2'><div><pre>                    .get(TenantHandler.PATH);
            for (Map&lt;String, Object&gt; hop : path) {
                // Fetch link
                Long srcDpid = (Long) hop.get(TenantHandler.SRC_DPID);
                Short srcPort = ((Integer) hop.get(TenantHandler.SRC_PORT))
                        .shortValue();
                Long dstDpid = (Long) hop.get(TenantHandler.DST_DPID);
                Short dstPort = ((Integer) hop.get(TenantHandler.DST_PORT))
                        .shortValue();
                DPIDandPortPair dpp = new DPIDandPortPair(new DPIDandPort(
                        srcDpid, srcPort), new DPIDandPort(dstDpid, dstPort));
                // Register link in current manager
                mngr.registerLink(dpp);
                // Update list of managers that wait for this link
                List&lt;OVXNetworkManager&gt; mngrs = this.linkToMngr.get(dpp);
                if (mngrs == null) {
                    this.linkToMngr
                            .put(dpp, new ArrayList&lt;OVXNetworkManager&gt;());
                }
                this.linkToMngr.get(dpp).add(mngr);

                // Register src/dst switches of this link
                mngr.registerSwitch(srcDpid);
                mngr.registerSwitch(dstDpid);
                // Update list of managers that wait for these switches
                mngrs = this.dpidToMngr.get(srcDpid);
                if (mngrs == null) {
                    this.dpidToMngr.put(srcDpid,
                            new ArrayList&lt;OVXNetworkManager&gt;());
                }
                this.dpidToMngr.get(srcDpid).add(mngr);
                mngrs = this.dpidToMngr.get(dstDpid);
                if (mngrs == null) {
                    this.dpidToMngr.put(dstDpid,
                            new ArrayList&lt;OVXNetworkManager&gt;());
                }
                this.dpidToMngr.get(dstDpid).add(mngr);
            }
        }
    }</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>384</td></tr><tr class="a"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>661</td></tr><tr class="b"><td colspan='2'><div><pre>            newPath.getSrcSwitch().setMplsFlowMod(mplsFlowMod.createBuilder().build());
            //newPath.getSrcSwitch().setmFlowMod(oldPath.getSrcSwitch().getmFlowMod());
            //log.info(&quot;getSrcSwitch After &quot; + mplsFlowMod.toString());
        }

        if(newPath.getDstSwitch() != null) {
            mplsFlowMod = oldPath.getDstSwitch().getMplsFlowMod().createBuilder().build();

            //log.info(&quot;getDstSwitch Before &quot; + ofFlowMod.toString());
            Match match = mplsFlowMod.getMatch().createBuilder().build();

            match = match.createBuilder()
                    .setExact(MatchField.ETH_SRC, newPath.getSrcHost().getMac())
                    .setExact(MatchField.ETH_DST, newPath.getDstHost().getMac())
                    .setExact(MatchField.ETH_TYPE, EthType.MPLS_UNICAST)
                    .setExact(MatchField.MPLS_LABEL, U32.of(label.getLabelValue()))
                    .build();

            match = OVXMessageUtil.updateMatch(mplsFlowMod.getMatch(), match);

            //log.info(&quot;getDstSwitch After &quot; + match.toString());

            List&lt;OFAction&gt; actions = new LinkedList&lt;&gt;();

            OFActionPopMpls actionPopMpls = factory.actions().buildPopMpls()
                    .setEthertype(EthType.IPv4)
                    .build();
            actions.add(actionPopMpls);

            OFActionOutput ofActionOutput = factory.actions().buildOutput()
                    .setPort(OFPort.of(newPath.getDstSwitch().getOutPort().getPortNumber()))
                    .build();
            actions.add(ofActionOutput);

            mplsFlowMod = mplsFlowMod.createBuilder()
                    .setPriority(mplsFlowMod.getPriority())
                    .setMatch(match)
                    .setActions(actions)
                    .build();

            newPath.getDstSwitch().setMplsFlowMod(mplsFlowMod.createBuilder().build());</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXSwitch.java</td><td>68</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXSwitch.java</td><td>67</td></tr><tr class="b"><td colspan='2'><div><pre>            this.log.info(&quot;Start virtual switch {} in virtual network {}&quot;,
                    dpid, virtualNetwork.getTenantId());
            OVXSwitch ovxSwitch = virtualNetwork.getSwitch(dpid.longValue());
            Map&lt;String, Object&gt; reply = new HashMap&lt;String, Object&gt;(
                    ovxSwitch.getDBObject());
            reply.put(TenantHandler.TENANT, ovxSwitch.getTenantId());
            resp = new JSONRPC2Response(reply, 0);

        } catch (final MissingRequiredField e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Unable to create virtual network : &quot;
                    + e.getMessage()), 0);
        } catch (final InvalidDPIDException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid DPID : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        }
        return resp;

    }

    @Override
    public JSONRPC2ParamsType getType() {
        return JSONRPC2ParamsType.OBJECT;
    }
}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/MonitoringHandler.java</td><td>82</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/TenantHandler.java</td><td>187</td></tr><tr class="b"><td colspan='2'><div><pre>            this.put(&quot;getVirtualAddressMapping&quot;, new GetVirtualAddressMapping());
        }
    };

    @Override
    public String[] handledRequests() {
        return this.handlers.keySet().toArray(new String[] {});
    }


    @Override
    @SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; })
    public JSONRPC2Response process(final JSONRPC2Request req,
                                    final MessageContext ctxt) {

        final ApiHandler m = this.handlers.get(req.getMethod());
        if (m != null) {

            if (m.getType() != JSONRPC2ParamsType.NO_PARAMS
                    &amp;&amp; m.getType() != req.getParamsType()) {
                return new JSONRPC2Response(new JSONRPC2Error(
                        JSONRPC2Error.INVALID_PARAMS.getCode(), req.getMethod()
                        + &quot; requires: &quot; + m.getType() + &quot;; got: &quot;
                        + req.getParamsType()), req.getID());
            }

            switch (m.getType()) {
                case NO_PARAMS:
                    return m.process(null);
                case ARRAY:
                    return m.process(req.getPositionalParams());
                case OBJECT:
                    return m.process(req.getNamedParams());
                default:
                    break;
            }
        }

        return new JSONRPC2Response(JSONRPC2Error.METHOD_NOT_FOUND, req.getID());
    }

}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>424</td></tr><tr class="a"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>701</td></tr><tr class="b"><td colspan='2'><div><pre>            newPath.getDstSwitch().setMplsFlowMod(mplsFlowMod.createBuilder().build());
            //newPath.getDstSwitch().setmFlowMod(oldPath.getDstSwitch().getmFlowMod());
            //log.info(&quot;getDstSwitch After &quot; + mplsFlowMod.toString());
        }

        if(newPath.getIntermediate().size() != 0) {
            mplsFlowMod = oldPath.getDstSwitch().getMplsFlowMod().createBuilder().build();

            for (Node node : newPath.getIntermediate()) {

                Match match = mplsFlowMod.getMatch().createBuilder().build();

                match = match.createBuilder()
                        .setExact(MatchField.ETH_TYPE, EthType.MPLS_UNICAST)
                        .setExact(MatchField.MPLS_LABEL, U32.of(label.getLabelValue()))
                        .build();

                List&lt;OFAction&gt; actions = new LinkedList&lt;&gt;();

                OFActionOutput ofActionOutput = factory.actions().buildOutput()
                        .setPort(OFPort.of(node.getOutPort().getPortNumber()))
                        .build();
                actions.add(ofActionOutput);

                mplsFlowMod = mplsFlowMod.createBuilder()
                        .setPriority(mplsFlowMod.getPriority())
                        .setMatch(match)
                        .setActions(actions)
                        .build();

                node.setMplsFlowMod(mplsFlowMod.createBuilder().build());</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/ConnectOVXLink.java</td><td>106</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/SetOVXLinkPath.java</td><td>89</td></tr><tr class="b"><td colspan='2'><div><pre>                Map&lt;String, Object&gt; reply = new HashMap&lt;String, Object&gt;(
                        virtualLink.getDBObject());
                reply.put(TenantHandler.TENANT, virtualLink.getTenantId());
                resp = new JSONRPC2Response(reply, 0);
            }
        } catch (final MissingRequiredField e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Unable to create virtual link : &quot;
                    + e.getMessage()), 0);
        } catch (final VirtualLinkException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid virtual link : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final IndexOutOfBoundException e) {
            resp = new JSONRPC2Response(
                    new JSONRPC2Error(
                            JSONRPC2Error.INVALID_PARAMS.getCode(),
                            this.cmdName()
                                    + &quot;: Impossible to create the virtual link, too many links in this virtual network : &quot;</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXPort.java</td><td>81</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXPort.java</td><td>93</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXPort.java</td><td>93</td></tr><tr class="a"><td colspan='2'><div><pre>                    + e.getMessage()), 0);
        } catch (final InvalidPortException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid port : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final InvalidDPIDException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid virtual dpid : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        }
        return resp;
    }


    @Override
    public JSONRPC2ParamsType getType() {
        return JSONRPC2ParamsType.OBJECT;
    }

}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/packet/AbstractSegment.java</td><td>112</td></tr><tr class="b"><td>net/onrc/openvirtex/packet/TCP.java</td><td>218</td></tr><tr class="a"><td colspan='2'><div><pre>        if (this.checksum == 0) {
            bb.rewind();
            int accumulation = 0;

            // compute pseudo header mac
            if (this.parent != null &amp;&amp; this.parent instanceof IPv4) {
                final IPv4 ipv4 = (IPv4) this.parent;
                accumulation += (ipv4.getSourceAddress() &gt;&gt; 16 &amp; 0xffff)
                        + (ipv4.getSourceAddress() &amp; 0xffff);
                accumulation += (ipv4.getDestinationAddress() &gt;&gt; 16 &amp; 0xffff)
                        + (ipv4.getDestinationAddress() &amp; 0xffff);
                accumulation += ipv4.getProtocol() &amp; 0xff;
                accumulation += length &amp; 0xffff;
            }

            for (int i = 0; i &lt; length / 2; ++i) {
                accumulation += 0xffff &amp; bb.getShort();
            }
            // pad to an even number of shorts
            if (length % 2 &gt; 0) {
                accumulation += (bb.get() &amp; 0xff) &lt;&lt; 8;
            }

            accumulation = (accumulation &gt;&gt; 16 &amp; 0xffff)
                    + (accumulation &amp; 0xffff);
            this.checksum = (short) (~accumulation &amp; 0xffff);
            bb.putShort(6, this.checksum);</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>357</td></tr><tr class="b"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>634</td></tr><tr class="a"><td colspan='2'><div><pre>            match = OVXMessageUtil.updateMatch(mplsFlowMod.getMatch(), match);

            //log.info(&quot;getSrcSwitch After &quot; + match.toString());

            List&lt;OFAction&gt; actions = new LinkedList&lt;&gt;();

            OFActionPushMpls actionPushMpls = factory.actions().buildPushMpls()
                    .setEthertype(EthType.MPLS_UNICAST)
                    .build();
            actions.add(actionPushMpls);

            OFActionSetField actionSetMplsLabel = factory.actions().buildSetField()
                    .setField(factory.oxms().mplsLabel(U32.of(label.getLabelValue())))
                    .build();
            actions.add(actionSetMplsLabel);

            OFActionOutput ofActionOutput = factory.actions().buildOutput()
                    .setPort(OFPort.of(newPath.getSrcSwitch().getOutPort().getPortNumber()))
                    .build();
            actions.add(ofActionOutput);

            mplsFlowMod = mplsFlowMod.createBuilder()
                    .setPriority(mplsFlowMod.getPriority())
                    .setMatch(match)
                    .setActions(actions)
                    .build();

            newPath.getSrcSwitch().setMplsFlowMod(mplsFlowMod.createBuilder().build());</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>431</td></tr><tr class="b"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>575</td></tr><tr class="a"><td colspan='2'><div><pre>                        if (this.getOFMessage().getVersion() == OFVersion.OF_10) {

                         /*  this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.IN_PORT)
                                    .setExact(MatchField.IN_PORT, OFPort.of(inPort.getPhysicalPortNumber()))
                                    .build();


                            this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.ETH_SRC)
                                    .setExact(MatchField.ETH_SRC, MacAddress.of(lUtils.getSrcMac().getBytes()))
                                    .build();

                            this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.ETH_DST)
                                    .setExact(MatchField.ETH_DST, MacAddress.of(lUtils.getDstMac().getBytes()))
                                    .build();

                            this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.ETH_TYPE)
                                    .setExact(MatchField.ETH_TYPE, EthType.IPv4)
                                    .build();
*/
                            this.modifyMatch(OVXMessageUtil.updateMatch(this.getFlowMod().getMatch(), this.getFlowMod().getMatch().createBuilder()
                                    .setExact(MatchField.IN_PORT, this.getFlowMod().getMatch().get(MatchField.IN_PORT))
                                    .setExact(MatchField.ETH_SRC, this.getFlowMod().getMatch().get(MatchField.ETH_SRC))
                                    .setExact(MatchField.ETH_DST, this.getFlowMod().getMatch().get(MatchField.ETH_DST))
                                    .setExact(MatchField.ETH_TYPE, EthType.IPv4)
                                    .setExact(MatchField.IPV4_SRC, this.getFlowMod().getMatch().get(IPV4_SRC))
                                    .setExact(MatchField.IPV4_DST, this.getFlowMod().getMatch().get(IPV4_DST))
                                    .build()));</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXPort.java</td><td>45</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXPort.java</td><td>47</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXPort.java</td><td>47</td></tr><tr class="b"><td colspan='2'><div><pre>    Logger log = LogManager.getLogger(RemoveOVXPort.class.getName());

    @Override
    public JSONRPC2Response process(final Map&lt;String, Object&gt; params) {
        JSONRPC2Response resp = null;

        try {
            final Number tenantId = HandlerUtils.&lt;Number&gt;fetchField(
                    TenantHandler.TENANT, params, true, null);
            final Number dpid = HandlerUtils.&lt;Number&gt;fetchField(
                    TenantHandler.VDPID, params, true, null);
            final Number port = HandlerUtils.&lt;Number&gt;fetchField(
                    TenantHandler.VPORT, params, true, null);

            HandlerUtils.isValidTenantId(tenantId.intValue());
            HandlerUtils
                    .isValidOVXSwitch(tenantId.intValue(), dpid.longValue());
            HandlerUtils.isValidOVXPort(tenantId.intValue(), dpid.longValue(),
                    port.shortValue());

            final OVXMap map = OVXMap.getInstance();
            final OVXNetwork virtualNetwork = map.getVirtualNetwork(tenantId
                    .intValue());

            virtualNetwork.removePort(dpid.longValue(), port.shortValue());</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>431</td></tr><tr class="a"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>474</td></tr><tr class="b"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>575</td></tr><tr class="a"><td colspan='2'><div><pre>                        if (this.getOFMessage().getVersion() == OFVersion.OF_10) {

                         /*  this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.IN_PORT)
                                    .setExact(MatchField.IN_PORT, OFPort.of(inPort.getPhysicalPortNumber()))
                                    .build();


                            this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.ETH_SRC)
                                    .setExact(MatchField.ETH_SRC, MacAddress.of(lUtils.getSrcMac().getBytes()))
                                    .build();

                            this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.ETH_DST)
                                    .setExact(MatchField.ETH_DST, MacAddress.of(lUtils.getDstMac().getBytes()))
                                    .build();

                            this.getFlowMod().getMatch()
                                    .createBuilder()
                                    .wildcard(MatchField.ETH_TYPE)
                                    .setExact(MatchField.ETH_TYPE, EthType.IPv4)
                                    .build();
*/
                            this.modifyMatch(OVXMessageUtil.updateMatch(this.getFlowMod().getMatch(), this.getFlowMod().getMatch().createBuilder()
                                    .setExact(MatchField.IN_PORT, this.getFlowMod().getMatch().get(MatchField.IN_PORT))
                                    .setExact(MatchField.ETH_SRC, this.getFlowMod().getMatch().get(MatchField.ETH_SRC))
                                    .setExact(MatchField.ETH_DST, this.getFlowMod().getMatch().get(MatchField.ETH_DST))
                                    .setExact(MatchField.ETH_TYPE, EthType.IPv4)
                                    .setExact(MatchField.IPV4_SRC, this.getFlowMod().getMatch().get(IPV4_SRC))
                                    .setExact(MatchField.IPV4_DST, this.getFlowMod().getMatch().get(IPV4_DST))
                                    .build()));</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/services/failover/FailOver.java</td><td>128</td></tr><tr class="b"><td>net/onrc/openvirtex/services/vm/Migration.java</td><td>568</td></tr><tr class="a"><td colspan='2'><div><pre>    }




    public void removeOldPhysicalPathFlowEntry(PhysicalPath pPath) {

        if(pPath.isOriginalPath()) {
            if(pPath.getMplsLabel().getPathIDs().size() == 0) {
                log.info(&quot;Remove Old Original PhysicalPath for PathID [{}]&quot;, pPath.getPathID());

                sendFlowDeleteStrict(pPath.getSrcSwitch());

                for(Node node : pPath.getIntermediate()) {
                    sendFlowDeleteStrict(node);
                }

                sendFlowDeleteStrict(pPath.getDstSwitch());
            }else{
                log.info(&quot;Remove Old Original PhysicalPath Edge Switch for PathID [{}]&quot;, pPath.getPathID());

                sendFlowDeleteStrict(pPath.getSrcSwitch());
                sendFlowDeleteStrict(pPath.getDstSwitch());
            }
        }else{
            log.info(&quot;Remove Old Referenced PhysicalPath Edge Switch for PathID [{}]&quot;, pPath.getPathID());
            sendFlowDeleteStrict(pPath.getSrcSwitch());
            sendFlowDeleteStrict(pPath.getDstSwitch());
        }
    }

    public void sendFlowDeleteStrict(Node node) {</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXSwitch.java</td><td>77</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXSwitch.java</td><td>80</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXSwitch.java</td><td>79</td></tr><tr class="b"><td colspan='2'><div><pre>                    + e.getMessage()), 0);
        } catch (final InvalidDPIDException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid DPID : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        }

        return resp;
    }

    @Override
    public JSONRPC2ParamsType getType() {
        return JSONRPC2ParamsType.OBJECT;
    }

}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/services/vm/Migration.java</td><td>435</td></tr><tr class="a"><td>net/onrc/openvirtex/services/vm/Migration.java</td><td>515</td></tr><tr class="b"><td colspan='2'><div><pre>                tempNode.setOutPort(newpPath.getDstHost().getPort().getPhysicalPort());

                newpPath.setDstSwitch(tempNode);

            }else{
                //log.info(&quot;findPhysicalPath physicalLinks.size( {} )&quot;, physicalLinks.size());
                Node srcNode = null;
                Node dstNode = null;
                LinkedList&lt;Node&gt; nodes = new LinkedList&lt;&gt;();

                for(PhysicalLink plink : physicalLinks) {
                    if(srcNode == null) {
                        srcNode = new Node(plink.getSrcSwitch());
                    }

                    srcNode.setOutPort(plink.getSrcPort());

                    nodes.add(srcNode);

                    dstNode = new Node(plink.getDstSwitch());
                    dstNode.setInPort(plink.getDstPort());

                    srcNode = dstNode;

                    if(plink.equals(physicalLinks.getLast())) {
                        nodes.add(srcNode);
                    }
                }

                for(Node node : nodes) {
                    if(node.equals(nodes.getFirst())) {
                        node.setInPort(physicalLinks.get(0).getSrcSwitch().getPort(pInport));</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/MonitoringService.java</td><td>48</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/TenantService.java</td><td>48</td></tr><tr class="b"><td colspan='2'><div><pre>        this.dispatcher.register(new MonitoringHandler());
    }

    @Override
    public void handle(final HttpServletRequest request,
            final HttpServletResponse response) {
        JSONRPC2Request json = null;
        JSONRPC2Response jsonResp = null;
        try {
            json = this.parseJSONRequest(request);
            jsonResp = this.dispatcher.process(json, null);
            jsonResp.setID(json.getID());
        } catch (final IOException e) {
            jsonResp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.PARSE_ERROR.getCode(),
                    AbstractService.stack2string(e)), 0);
        } catch (final JSONRPC2ParseException e) {
            jsonResp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.PARSE_ERROR.getCode(),
                    AbstractService.stack2string(e)), 0);
        }
        try {
            this.writeJSONObject(response, jsonResp);
        } catch (final IOException e) {</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/messages/statistics/OVXAggregateStatsRequest.java</td><td>119</td></tr><tr class="a"><td>net/onrc/openvirtex/messages/statistics/OVXFlowStatsRequest.java</td><td>128</td></tr><tr class="b"><td colspan='2'><div><pre>    }

    private List&lt;PhysicalSwitch&gt; getPhysicalSwitches(OVXSwitch sw) {
        if (sw instanceof OVXSingleSwitch) {
            try {
                return sw.getMap().getPhysicalSwitches(sw);
            } catch (SwitchMappingException e) {
                log.debug(&quot;OVXSwitch {} does not map to any physical switches&quot;,
                        sw.getSwitchName());
                return new LinkedList&lt;&gt;();
            }
        }
        LinkedList&lt;PhysicalSwitch&gt; sws = new LinkedList&lt;PhysicalSwitch&gt;();
        for (OVXPort p : sw.getPorts().values()) {
            if (!sws.contains(p.getPhysicalPort().getParentSwitch())) {
                sws.add(p.getPhysicalPort().getParentSwitch());
            }
        }
        return sws;
    }

    @Override
    public int hashCode() {
        return this.ofAggregateStatsRequest.hashCode();</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/ConnectHost.java</td><td>99</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/CreateOVXPort.java</td><td>98</td></tr><tr class="b"><td colspan='2'><div><pre>                    + &quot;: Unable to connect host : &quot; + e.getMessage()),
                    0);
        } catch (final InvalidPortException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid port : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final IndexOutOfBoundException e) {
            resp = new JSONRPC2Response(
                    new JSONRPC2Error(
                            JSONRPC2Error.INVALID_PARAMS.getCode(),
                            this.cmdName()
                                    + &quot;: Impossible to create the virtual port, too many ports on this virtual switch : &quot;
                                    + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/AddController.java</td><td>93</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/CreateOVXSwitch.java</td><td>105</td></tr><tr class="b"><td colspan='2'><div><pre>                                    + e.getMessage()), 0);
        } catch (final InvalidDPIDException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid DPID : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        } catch (ControllerUnavailableException e) {</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/AddController.java</td><td>93</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/CreateOVXSwitch.java</td><td>105</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXSwitch.java</td><td>77</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXSwitch.java</td><td>80</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXSwitch.java</td><td>79</td></tr><tr class="a"><td colspan='2'><div><pre>                                    + e.getMessage()), 0);
        } catch (final InvalidDPIDException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid DPID : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        } catch (ControllerUnavailableException e) {</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/services/path/physicalpath/PhysicalPath.java</td><td>132</td></tr><tr class="b"><td>net/onrc/openvirtex/services/path/virtualpath/VirtualPath.java</td><td>403</td></tr><tr class="a"><td colspan='2'><div><pre>        str = str + &quot;FlowID = &quot; + this.getFlowID() + &quot;\n&quot;;
        str = str + &quot;TenantID = &quot; + this.getTenantID() + &quot;\n&quot;;

        if(this.getSrcSwitch() != null) {
            str = str + &quot;SrcSwitch = &quot; + this.getSrcSwitch().toString() + &quot;\n&quot;;
        }

        if(this.getIntermediate().size() != 0) {
            for(Node node : this.getIntermediate()) {
                //log.info(&quot;Intermediate = &quot; + node.toString());
                str = str + &quot;Intermediate = &quot; + node.toString() + &quot;\n&quot;;
            }
        }

        if(this.getDstSwitch() != null) {
            str = str + &quot;DstSwitch = &quot; + this.getDstSwitch().toString() + &quot;\n&quot;;
        }

        if(this.originalPathID != null) {</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXSwitch.java</td><td>45</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXSwitch.java</td><td>46</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXSwitch.java</td><td>46</td></tr><tr class="b"><td colspan='2'><div><pre>    Logger log = LogManager.getLogger(RemoveOVXSwitch.class.getName());


    @Override
    public JSONRPC2Response process(final Map&lt;String, Object&gt; params) {
        JSONRPC2Response resp = null;

        try {
            final Number tenantId = HandlerUtils.&lt;Number&gt;fetchField(
                    TenantHandler.TENANT, params, true, null);
            final Number dpid = HandlerUtils.&lt;Number&gt;fetchField(
                    TenantHandler.VDPID, params, true, null);


            HandlerUtils.isValidTenantId(tenantId.intValue());
            HandlerUtils
                    .isValidOVXSwitch(tenantId.intValue(), dpid.longValue());

            final OVXMap map = OVXMap.getInstance();
            final OVXNetwork virtualNetwork = map.getVirtualNetwork(tenantId
                    .intValue());
            virtualNetwork.removeSwitch(dpid.longValue());</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/services/path/physicalpath/PhysicalPath.java</td><td>340</td></tr><tr class="a"><td>net/onrc/openvirtex/services/path/physicalpath/PhysicalPath.java</td><td>444</td></tr><tr class="b"><td colspan='2'><div><pre>                Node srcNode = null;
                Node dstNode = null;
                LinkedList&lt;Node&gt; nodes = new LinkedList&lt;&gt;();

                for(PhysicalLink plink : physicalLinks) {
                    if(srcNode == null) {
                        srcNode = new Node(plink.getSrcSwitch());
                    }

                    srcNode.setOutPort(plink.getSrcPort());

                    nodes.add(srcNode);

                    dstNode = new Node(plink.getDstSwitch());
                    dstNode.setInPort(plink.getDstPort());

                    srcNode.setNextNode(dstNode);

                    srcNode = dstNode;

                    if(plink.equals(physicalLinks.getLast())) {
                        nodes.add(srcNode);
                    }
                }</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/linkdiscovery/SwitchDiscoveryManager.java</td><td>214</td></tr><tr class="a"><td>net/onrc/openvirtex/linkdiscovery/SwitchDiscoveryManager.java</td><td>250</td></tr><tr class="b"><td colspan='2'><div><pre>    private OFPacketOut createLLDPPacketOut(final PhysicalPort port)
            throws PortMappingException {
        if (port == null) {
            throw new PortMappingException(
                    &quot;Cannot send LLDP associated with a nonexistent port&quot;);
        }

        ArrayList&lt;OFAction&gt; actionList = new ArrayList&lt;OFAction&gt;();
        OFActions actions = this.factory.actions();

        OFActionOutput output = actions.buildOutput()
                .setMaxLen(0xffff)
                .setPort(OFPort.of(port.getPortNumber()))
                .build();
        actionList.add(output);

        this.lldpPacket.setPort(port);
        this.ethPacket.setSourceMACAddress(port.getOfPort().getHwAddr().getBytes());

        final byte[] lldp = this.ethPacket.serialize();</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/ConnectOVXRoute.java</td><td>140</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/SetOVXLinkPath.java</td><td>122</td></tr><tr class="b"><td colspan='2'><div><pre>                                    + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        } catch (final InvalidPriorityException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        }
        return resp;
    }


    @Override
    public JSONRPC2ParamsType getType() {
        return JSONRPC2ParamsType.OBJECT;
    }
}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/DisconnectOVXLink.java</td><td>83</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXNetwork.java</td><td>78</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/RemoveOVXSwitch.java</td><td>81</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXNetwork.java</td><td>73</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StartOVXSwitch.java</td><td>84</td></tr><tr class="a"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXNetwork.java</td><td>74</td></tr><tr class="b"><td>net/onrc/openvirtex/api/service/handlers/tenant/StopOVXSwitch.java</td><td>83</td></tr><tr class="a"><td colspan='2'><div><pre>                    + &quot;: Invalid virtual link : &quot; + e.getMessage()), 0);
        } catch (final InvalidTenantIdException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: Invalid tenant id : &quot; + e.getMessage()), 0);
        } catch (final NetworkMappingException e) {
            resp = new JSONRPC2Response(new JSONRPC2Error(
                    JSONRPC2Error.INVALID_PARAMS.getCode(), this.cmdName()
                    + &quot;: &quot; + e.getMessage()), 0);
        }
        return resp;
    }

    @Override
    public JSONRPC2ParamsType getType() {
        return JSONRPC2ParamsType.OBJECT;
    }


}</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/packet/TCP.java</td><td>214</td></tr><tr class="b"><td>net/onrc/openvirtex/packet/UDP.java</td><td>146</td></tr><tr class="a"><td colspan='2'><div><pre>            ((IPv4) this.parent).setProtocol(IPv4.PROTOCOL_TCP);
        }

        // compute checksum if needed
        if (this.checksum == 0) {
            bb.rewind();
            int accumulation = 0;

            // compute pseudo header mac
            if (this.parent != null &amp;&amp; this.parent instanceof IPv4) {
                final IPv4 ipv4 = (IPv4) this.parent;
                accumulation += (ipv4.getSourceAddress() &gt;&gt; 16 &amp; 0xffff)
                        + (ipv4.getSourceAddress() &amp; 0xffff);
                accumulation += (ipv4.getDestinationAddress() &gt;&gt; 16 &amp; 0xffff)
                        + (ipv4.getDestinationAddress() &amp; 0xffff);
                accumulation += ipv4.getProtocol() &amp; 0xff;
                accumulation += length &amp; 0xffff;</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/packet/AbstractSegment.java</td><td>112</td></tr><tr class="b"><td>net/onrc/openvirtex/packet/UDP.java</td><td>150</td></tr><tr class="a"><td colspan='2'><div><pre>        if (this.checksum == 0) {
            bb.rewind();
            int accumulation = 0;

            // compute pseudo header mac
            if (this.parent != null &amp;&amp; this.parent instanceof IPv4) {
                final IPv4 ipv4 = (IPv4) this.parent;
                accumulation += (ipv4.getSourceAddress() &gt;&gt; 16 &amp; 0xffff)
                        + (ipv4.getSourceAddress() &amp; 0xffff);
                accumulation += (ipv4.getDestinationAddress() &gt;&gt; 16 &amp; 0xffff)
                        + (ipv4.getDestinationAddress() &amp; 0xffff);
                accumulation += ipv4.getProtocol() &amp; 0xff;
                accumulation += length &amp; 0xffff;</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>345</td></tr><tr class="b"><td>net/onrc/openvirtex/services/forwarding/mpls/MplsForwarding.java</td><td>620</td></tr><tr class="a"><td colspan='2'><div><pre>        OFFlowMod mplsFlowMod = null;

        if(newPath.getSrcSwitch() != null) {
            mplsFlowMod = oldPath.getSrcSwitch().getMplsFlowMod().createBuilder().build();

            //log.info(&quot;getSrcSwitch Before &quot; + ofFlowMod.toString());
            Match match = mplsFlowMod.getMatch().createBuilder().build();

            match = match.createBuilder()
                    .setExact(MatchField.IN_PORT, OFPort.of(newPath.getSrcSwitch().getInPort().getPortNumber()))
                    .build();

            match = OVXMessageUtil.updateMatch(mplsFlowMod.getMatch(), match);</pre></div></td></tr></table><table align="center" border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>295</td></tr><tr class="b"><td>net/onrc/openvirtex/messages/OVXFlowMod.java</td><td>377</td></tr><tr class="a"><td colspan='2'><div><pre>    private void prepAndSendSouth(OVXPort inPort, boolean pflag, OVXMatch ovxMatch) throws IndexOutOfBoundException {

        if (!inPort.isActive()) {
            log.warn(&quot;Virtual network {}: port {} on switch {} is down.&quot;,
                    sw.getTenantId(), inPort.getPortNumber(),
                    sw.getSwitchName());
            return;
        }

        this.modifyMatch(
                OVXMessageUtil.updateMatch(
                        this.getFlowMod().getMatch(),
                        this.getFlowMod().getMatch().createBuilder()
                                .setExact(MatchField.IN_PORT, OFPort.of(inPort.getPhysicalPortNumber()))
                                .build()
                )
        );

        OVXMessageUtil.translateXid(this, inPort);</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;  All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
